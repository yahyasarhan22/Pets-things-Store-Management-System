{% extends "base.html" %}
{% block title %}Today Check-ins & Check-outs - Pets & Things{% endblock %}

{% block content %}
<section class="page-header">
  <div class="page-header-content">
    <div class="page-title-section">
      <h1 class="page-title"><span class="title-icon">ğŸ“…</span>Today</h1>
      <p class="page-subtitle">Check-ins and check-outs for today</p>
    </div>
    <div class="header-actions">
      <a href="{{ url_for('admin_bookings') }}" class="btn-secondary">ğŸ“‹ All Bookings</a>
    </div>
  </div>
</section>

<section class="inventory-section">
  <div class="inventory-container">

    {% if error %}
      <div class="alert error" style="margin-bottom:16px;">
        <span class="error-icon">âš ï¸</span>{{ error }}
      </div>
    {% endif %}

    <!-- âœ… CHECK-INS -->
    <div class="form-card" style="max-width:100%;">
      <div style="padding:24px;">
        <div style="display:flex; align-items:center; gap:10px; margin-bottom:14px;">
          <span style="font-size:1.5rem;">ğŸŸ¢</span>
          <h2 style="margin:0;">Check-ins Today</h2>
          <span style="margin-left:auto; color:var(--text-secondary);">
            Total: <strong>{{ checkins|length }}</strong>
          </span>
        </div>

        <div class="table-wrapper">
          <table class="inventory-table">
            <thead>
              <tr>
                <th>#</th>
                <th>Customer</th>
                <th>Dates</th>
                <th>Status</th>
                <th>Rooms & Cats</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              {% if checkins and checkins|length > 0 %}
                {% for b in checkins %}
                <tr>
                  <td><strong>#{{ b.booking_id }}</strong></td>
                  <td>{{ b.customer_name }}</td>
                  <td>{{ b.date_from }} â†’ {{ b.date_to }}</td>
                  <td><strong>{{ b.status }}</strong></td>
                  <td>
                    {% for line in b.lines %}
                      <div>ğŸ¨ {{ line.room_number }} â€” ğŸ± {{ line.cat_name }}</div>
                    {% endfor %}
                  </td>
                  <td><strong>${{ "%.2f"|format(b.total_amount) }}</strong></td>
                </tr>
                {% endfor %}
              {% else %}
                <tr>
                  <td colspan="6" style="text-align:center; padding:16px;">
                    No check-ins today.
                  </td>
                </tr>
              {% endif %}
            </tbody>
          </table>
        </div>

        <div class="info-notice" style="margin-top:14px;">
          <span class="info-icon">ğŸ’¡</span>
          <div class="info-text">
            Tip: Confirm any <strong>PENDING</strong> bookings before check-in.
          </div>
        </div>
      </div>
    </div>

    <!-- âœ… CHECK-OUTS -->
    <div class="form-card" style="max-width:100%; margin-top:18px;">
      <div style="padding:24px;">
        <div style="display:flex; align-items:center; gap:10px; margin-bottom:14px;">
          <span style="font-size:1.5rem;">ğŸ”µ</span>
          <h2 style="margin:0;">Check-outs Today</h2>
          <span style="margin-left:auto; color:var(--text-secondary);">
            Total: <strong>{{ checkouts|length }}</strong>
          </span>
        </div>

        <div class="table-wrapper">
          <table class="inventory-table">
            <thead>
              <tr>
                <th>#</th>
                <th>Customer</th>
                <th>Dates</th>
                <th>Status</th>
                <th>Rooms & Cats</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              {% if checkouts and checkouts|length > 0 %}
                {% for b in checkouts %}
                <tr>
                  <td><strong>#{{ b.booking_id }}</strong></td>
                  <td>{{ b.customer_name }}</td>
                  <td>{{ b.date_from }} â†’ {{ b.date_to }}</td>
                  <td><strong>{{ b.status }}</strong></td>
                  <td>
                    {% for line in b.lines %}
                      <div>ğŸ¨ {{ line.room_number }} â€” ğŸ± {{ line.cat_name }}</div>
                    {% endfor %}
                  </td>
                  <td><strong>${{ "%.2f"|format(b.total_amount) }}</strong></td>
                </tr>
                {% endfor %}
              {% else %}
                <tr>
                  <td colspan="6" style="text-align:center; padding:16px;">
                    No check-outs today.
                  </td>
                </tr>
              {% endif %}
            </tbody>
          </table>
        </div>

        <div class="info-notice" style="margin-top:14px;">
          <span class="info-icon">âœ…</span>
          <div class="info-text">
            Tip: After pickup, you can mark bookings as <strong>COMPLETED</strong>.
          </div>
        </div>
      </div>
    </div>

  </div>
</section>
{% endblock %}
